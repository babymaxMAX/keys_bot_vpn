<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LsJ‚öîÔ∏èVPN - –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loading-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 400px;
            width: 100%;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: #f39c12;
            border-radius: 20px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: white;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 16px;
            color: #6c757d;
            margin-bottom: 30px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #f39c12;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 20px;
        }

        .fallback-link {
            background: #28a745;
            color: white;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: bold;
            display: inline-block;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .fallback-link:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .error {
            color: #dc3545;
            font-size: 14px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="notice-bar" style="position: fixed; top: 0; left: 0; right: 0; background: #ffe08a; color: #2c3e50; font-weight: 700; text-align: center; padding: 10px 12px; z-index: 9999; border-bottom: 1px solid #f1c40f; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
        –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á
    </div>
    <div class="loading-container" style="margin-top: 48px;">
        <div class="logo">‚öîÔ∏è</div>
        <div class="title">LsJ‚öîÔ∏èVPN</div>
        <div class="subtitle">–û—Ç–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ...</div>
        
        <div class="spinner"></div>
        <div class="status" id="status">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é...</div>
        
        <a href="#" class="fallback-link" id="fallbackLink" style="display: none;">
            üì± –û—Ç–∫—Ä—ã—Ç—å –≤—Ä—É—á–Ω—É—é
        </a>
        
        <div class="error" id="error" style="display: none;">
            –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ v2raytun –∏–∑ App Store.
        </div>
    </div>

    <script>
        // VLESS –∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        const originalKey = "vless://e4392413-7142-4a95-a934-f084649b45e7@84.200.87.247:8443/?type=tcp&security=reality&pbk=FKZANuukwZa3GsnF146p81LyfoEtFp8pXi2unytjbiU&fp=chrome&sni=www.samsung.com&sid=b4bb&spx=%2F#INST%3Amatras_raskladnoi_05%20%F0%9F%93%B8free-bksui0vi";
        const configFileUrl = window.location.origin + '/config.html';
        const encodedConfigUrl = encodeURIComponent(configFileUrl);
        const deeplinkUrl = `https://deeplink.website/?url=${encodedConfigUrl}`;

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            let attempts = 0;
            const maxAttempts = 4;

            function attempt() {
                attempts++;
                try {
                    if (attempts === 1) {
                        window.location.href = deeplinkUrl;
                    } else if (attempts === 2) {
                        const a = document.createElement('a');
                        a.href = deeplinkUrl; 
                        a.style.display = 'none';
                        document.body.appendChild(a); 
                        a.click(); 
                        document.body.removeChild(a);
                    } else if (attempts === 3) {
                        window.open(deeplinkUrl, '_blank');
                    } else {
                        // –ü—Ä—è–º–∞—è –ø–æ–ø—ã—Ç–∫–∞ vless://
                        window.location.href = originalKey;
                    }
                } catch (e) { /* no-op */ }

                if (attempts >= maxAttempts) {
                    setTimeout(() => {
                        fetch(configFileUrl).then(r => r.text()).then(text => {
                            if (navigator.clipboard) {
                                navigator.clipboard.writeText(text || originalKey);
                            }
                        }).catch(() => {/* no-op */});
                        const fallback = document.getElementById('fallbackLink');
                        if (fallback) fallback.style.display = 'inline-block';
                    }, 1000);
                } else {
                    setTimeout(attempt, 200);
                }
            }

            setTimeout(attempt, 100);
        };

        const container = document.querySelector('.loading-container');
        if (container) {
          const insta = document.createElement('a');
          insta.href = 'https://www.instagram.com/matras_raskladnoi_05?igsh=MW83ejVpamt0Z2czeg%3D%3D&utm_source=qr';
          insta.className = 'fallback-link';
          insta.textContent = 'üì∑ –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Instagram';
          insta.target = '_blank';
          container.appendChild(insta);

          const wa = document.createElement('a');
          wa.href = 'https://wa.me/79634244662';
          wa.className = 'fallback-link';
          wa.textContent = 'üí¨ –í–æ–ø—Ä–æ—Å—ã –ø–æ VPN (WhatsApp)';
          wa.target = '_blank';
          container.appendChild(wa);
        }
    </script>
</body>
</html>
